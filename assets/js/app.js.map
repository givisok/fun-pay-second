{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var App = App || {};\n\n(function (App, $) {\n    /**\n     *\n     * @returns {boolean}\n     */\n    $.fn.isScrollable = function () {\n        return this.get(0).scrollHeight > this.height();\n    };\n\n    App.debug = true;//false for production\n    App.modal = function () {\n        var modalSelector, modalHeader, modalBody, modalFooter, modalContent, scrollBarWidth;\n\n        $(document).ready(function () {\n            modalSelector = $('#test-modal');\n            scrollBarWidth = App.helpers.scrollBarWidth();\n            modalContent = modalSelector.find('.modal-content');\n            modalHeader = modalSelector.find('#test-modal-header');\n            modalBody = modalSelector.find('.modal-body');\n            modalFooter = modalSelector.find('.modal-footer');\n\n            modalSelector.on('hidden.bs.modal', function () {\n                modalHeader.html('');\n                modalBody.html('');\n                modalSelector.css(\"padding-left\", \"\");\n                modalContent.removeClass().addClass('modal-content');\n                modalSelector.off('shown.bs.modal');\n            })\n        });\n\n        function fixScrollBarBug() {\n            if (modalSelector.isScrollable()) {\n                modalSelector.css(\"padding-left\", scrollBarWidth);\n            } else {\n                modalSelector.css(\"padding-left\", '');\n            }\n        }\n\n        return {\n            show: function () {\n                modalSelector.modal('show');\n            },\n            hide: function () {\n                modalSelector.modal('hide');\n            },\n            setBody: function (data) {\n                if (!modalSelector.hasClass('in')) {\n                    modalSelector.on('shown.bs.modal', function () {\n                        modalBody.html(data);\n                        fixScrollBarBug();\n                    });\n                } else {\n                    modalBody.html(data);\n                    fixScrollBarBug();\n                }\n            },\n            setHeader: function (data) {\n                modalHeader.html(data);\n            },\n\n            setFooter: function (data) {\n                modalFooter.html(data);\n            },\n\n            showPreLoader: function () {\n                var preLoader = '<div class=\"row\"><div class=\"center-block col-md-2 pre-loader-center\"><img src=\"images/ajax-loader.gif\"></div></div>';\n                modalBody.html(preLoader);\n            },\n\n            setError: function (errorText) {\n                App.modal.setHeader('Error');\n                modalContent.addClass('modal-error');\n                var errorMessage = '<div class=\"alert\" role=\"alert\">';\n                errorMessage += '<strong>If the problem persists please contact us support@hell.yeah</strong>';\n                if (App.debug) {\n                    errorMessage += '<br><br>' + errorText;\n                }\n                errorMessage += '</div>';\n                App.modal.setBody(errorMessage);\n            }\n        }\n    }();\n\n    App.test = {\n        testFunction: function (url) {\n            App.modal.setHeader('Loading...');\n            App.modal.showPreLoader(false);\n            App.modal.show();\n            try {\n                var request = App.request.make({url: url});\n            } catch (e) {\n                App.modal.setError(e.toString());\n                return;\n            }\n\n            request.done(function (data) {\n                if (data) {\n                    App.modal.setHeader('Some header');\n                    App.modal.setBody(data);\n                } else {\n                    App.modal.setError('Empty answer!');\n                }\n            });\n\n            request.fail(function (jqXHR, textStatus, errorThrown) {\n                App.modal.setError('Request error:' + jqXHR.status + ' ' + errorThrown);\n            });\n        }\n    };\n\n    App.helpers = {\n        isString: function (value) {\n            return (typeof value === 'string' || value instanceof String);\n        },\n        isObject: function (value) {\n            return (value === Object(value));\n        },\n        setDefaultValue: function (value, defaultValue) {\n            return typeof value !== 'undefined' ? value : defaultValue;\n        },\n        isCallback: function (callback) {\n            return typeof callback === 'function';\n        },\n        scrollBarWidth: function () {\n            var outer = $('<div>');\n            var body = $('body');\n            outer.css({\n                \"visibility\": \"hidden\",\n                \"width\": \"100px\"\n            });\n            body.append(outer);\n            var widthNoScroll = outer.outerWidth();\n            outer.css({\"overflow\": \"scroll\"});\n            var inner = $('<div>');\n            inner.css(\"width\", \"100%\");\n            outer.append(inner);\n            var widthWithScroll = inner.outerWidth();\n            outer.remove();\n\n            return widthNoScroll - widthWithScroll;\n        }\n    };\n\n    App.request = {\n        /**\n         * @throws error\n         * @param params - ajax params {url, method, data}\n         */\n        make: function (params) {\n            if (!App.helpers.isObject(params)) {\n                throw new TypeError('Bad params type. Wait type object, but ' + typeof params + ' given');\n            }\n\n            if (!App.request.validateUrl(params.url)) {\n                throw new Error('Url invalid');\n            }\n            params.method = App.helpers.setDefaultValue(params.method, 'GET');\n            var availMethods = ['GET', 'POST', 'DELETE', 'PUT'];\n            if (!App.helpers.isString(params.method) || availMethods.indexOf(params.method) === -1) {\n                throw new Error('Method invalid');\n            }\n\n            params.data = App.helpers.setDefaultValue(params.data, {});\n            if (!App.helpers.isObject(params.data)) {\n                throw new TypeError('Bad params type. Wait type object, but ' + typeof params.data + ' given');\n            }\n\n            return $.ajax({\n                url: params.url,\n                method: params.method,\n                data: params.data\n            });\n        },\n\n        /**\n         *\n         * @param url\n         * @returns {boolean}\n         */\n        validateUrl: function (url) {\n            if (!App.helpers.isString(url)) {\n                throw new TypeError('Bad url type. Wait type string, but ' + typeof url + ' given');\n            }\n\n            var urlRegExp = /[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/gi;\n\n            return urlRegExp.test(url);\n        }\n    };\n})(App, jQuery);\n"]}